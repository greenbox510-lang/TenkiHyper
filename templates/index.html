<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>äº¬éƒ½å¤©æ°—ã‚¯ã‚¤ã‚º</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">
    <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ -->
    <img id="character" src="{{ url_for('static', filename='images/' ~ character_image) }}" alt="ã‚­ãƒ£ã‚¹ã‚¿ãƒ¼" class="character">





    <!-- å¤©æ°—ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ -->
    <div id="weather-effect"></div>

    <!-- äº¬éƒ½èƒŒæ™¯ã¯CSSã§è¨­å®š -->
    <div class="quiz-area">
      <h1>äº¬éƒ½ã‚­ãƒ£ã‚¹ã‚¿ãƒ¼ã®å¤©æ°—ã‚¯ã‚¤ã‚º</h1>
      <div id="weather"></div>
      <div id="quiz"></div>
      <div id="result"></div>
    </div>
  </div>

  <script>
    async function loadQuiz() {
      const response = await fetch("/api/quiz");
      const data = await response.json();

      document.getElementById("weather").textContent = "å¤©æ°—: " + data.weather;

      const quizDiv = document.getElementById("quiz");
      quizDiv.innerHTML = "<h2>" + data.quiz.question + "</h2>";

      data.quiz.options.forEach(option => {
        const button = document.createElement("button");
        button.textContent = option;
        button.onclick = () => checkAnswer(option, data.quiz.answer);
        quizDiv.appendChild(button);
        quizDiv.appendChild(document.createElement("br"));
      });

      // å¤©æ°—ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆ
      const effect = document.getElementById("weather-effect");
      if (data.weather.includes("æ™´")) {
        effect.textContent = "â˜€ï¸";
        effect.className = "";
        effect.classList.add("sun");
      } else if (data.weather.includes("é›¨")) {
        effect.textContent = "ğŸŒ§ï¸";
        effect.className = "";
        effect.classList.add("rain");
      } else {
        effect.textContent = "â˜ï¸";
        effect.className = "";
        effect.classList.add("cloud");
      }
    }

    function checkAnswer(selected, answer) {
      const resultDiv = document.getElementById("result");
      if (selected === answer) {
        resultDiv.textContent = "ğŸ‰ æ­£è§£ï¼";
      } else {
        resultDiv.textContent = "ğŸ˜… æ®‹å¿µï¼ æ­£è§£ã¯ " + answer;
      }
    }

    loadQuiz();


  </script>

</body>
</html>
